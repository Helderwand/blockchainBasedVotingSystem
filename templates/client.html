<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blockchain Voting System</title>
</head>
<body>
    <h1>Welcome to Ahmet Alper Uzuntepe's Blockchain Based Voting System</h1>

    <form id="registrationForm">
        <label for="voter_id">Voter ID:</label>
        <input type="text" id="voter_id" name="voter_id" required>
        <button type="button" id="registerButton">Register Voter</button>
    </form>

    <form id="votingForm">
        <label for="voter_id_vote">Voter ID:</label>
        <input type="text" id="voter_id_vote" name="voter_id_vote" required>
        <label for="candidate">Candidate:</label>
        <input type="text" id="candidate" name="candidate" required>
        <button type="button" id="voteButton">Vote</button>
    </form>

    <button type="button" id="fullChainButton">View Full Chain</button>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js"></script>

    <script>
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDEJcPvVj9DLLsk6iyO7vlKkDt0MOy0GFA",
            authDomain: "blockchainbasedvoting-5f458.firebaseapp.com",
            projectId: "blockchainbasedvoting-5f458",
            storageBucket: "blockchainbasedvoting-5f458.appspot.com",
            messagingSenderId: "938535485529",
            appId: "1:938535485529:web:10fbb4cf1a55d7abda7148",
            measurementId: "G-15LHK80GQS"
        };

        // Initialize Firebase asynchronously
        async function initializeFirebase() {
            await firebase.initializeApp(firebaseConfig);
            const analytics = firebase.analytics();
            console.log("Firebase initialized");
        }

        initializeFirebase(); // Call the async function to initialize Firebase

        // Your additional JavaScript code for client interactions
        document.getElementById('registerButton').addEventListener('click', registerVoter);
        document.getElementById('voteButton').addEventListener('click', vote);
        document.getElementById('fullChainButton').addEventListener('click', getFullChain);

        function registerVoter() {
            const voterId = document.getElementById('voter_id').value;
            // Use Firebase to store voter information or perform other actions
            console.log(`Registered Voter: ${voterId}`);
            // Redirect to the result page after registration
            window.location.href = "/display_results";
        }

        function vote() {
            const voterId = document.getElementById('voter_id_vote').value;
            const candidate = document.getElementById('candidate').value;
            // Use Firebase to record the vote or perform other actions
            console.log(`Vote: ${voterId} for ${candidate}`);
            // Redirect to the result page after voting
            window.location.href = "/display_results";
        }

        function getFullChain() {
            // Use Firebase to retrieve and display the full chain
            console.log('Fetching Full Chain...');
            // Redirect to the chain page after fetching the full chain
            window.location.href = "/chain";
        }
    </script>
</body>
</html>